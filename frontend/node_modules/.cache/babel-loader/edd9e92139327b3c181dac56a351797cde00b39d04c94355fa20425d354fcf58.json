{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import PostDetail from\"../components/PostDetail\";import\"../css/Profile.css\";import ProfilePic from\"../components/ProfilePic\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){var picLink=\"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";const[pic,setPic]=useState([]);const[show,setShow]=useState(false);const[posts,setPosts]=useState([]);const[user,setUser]=useState(\"\");const[changePic,setChangePic]=useState(false);const toggleDetails=posts=>{if(show){setShow(false);}else{setShow(true);setPosts(posts);}};const changeprofile=()=>{if(changePic){setChangePic(false);}else{setChangePic(true);}};useEffect(()=>{fetch(`/user/${JSON.parse(localStorage.getItem(\"user\"))._id}`,{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(res=>res.json()).then(result=>{console.log(result);setPic(result.posts||[]);// Ensure that 'posts' is an array\nsetUser(result.user||{});// Ensure that 'user' is an object\n}).catch(err=>console.error(\"Error fetching profile:\",err));// Add error handling\n},[]);// The dependency array should remain empty\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{onClick:changeprofile,src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pofile-data\",children:[/*#__PURE__*/_jsx(\"h1\",{children:JSON.parse(localStorage.getItem(\"user\")).name}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[pic?pic.length:\"0\",\" posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:pic.map(pics=>{return/*#__PURE__*/_jsx(\"img\",{src:pics.photo,onClick:()=>{toggleDetails(pics);},alt:pics.title||\"User post\"// Provide meaningful alt text\n,className:\"item\"},pics._id);})}),show&&/*#__PURE__*/_jsx(PostDetail,{item:posts,toggleDetails:toggleDetails}),changePic&&/*#__PURE__*/_jsx(ProfilePic,{changeprofile:changeprofile})]});}","map":{"version":3,"names":["React","useEffect","useState","PostDetail","ProfilePic","jsx","_jsx","jsxs","_jsxs","Profile","picLink","pic","setPic","show","setShow","posts","setPosts","user","setUser","changePic","setChangePic","toggleDetails","changeprofile","fetch","JSON","parse","localStorage","getItem","_id","headers","Authorization","then","res","json","result","console","log","catch","err","error","className","children","onClick","src","Photo","alt","name","style","display","length","followers","following","width","opacity","margin","map","pics","photo","title","item"],"sources":["C:/Users/Rambo/Desktop/Twinsta/backend/frontend/src/screens/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport PostDetail from \"../components/PostDetail\";\r\nimport \"../css/Profile.css\";\r\nimport ProfilePic from \"../components/ProfilePic\";\r\n\r\nexport default function Profile() {\r\n  var picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\"\r\n  const [pic, setPic] = useState([]);\r\n  const [show, setShow] = useState(false)\r\n  const [posts, setPosts] = useState([]);\r\n  const [user, setUser] = useState(\"\")\r\n  const [changePic, setChangePic] = useState(false)\r\n\r\n\r\n  const toggleDetails = (posts) => {\r\n    if (show) {\r\n      setShow(false);\r\n    } else {\r\n      setShow(true);\r\n      setPosts(posts);\r\n    }\r\n  };\r\n\r\n  const changeprofile = () => {\r\n    if (changePic) {\r\n      setChangePic(false)\r\n    } else {\r\n      setChangePic(true)\r\n    }\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    fetch(`/user/${JSON.parse(localStorage.getItem(\"user\"))._id}`, {\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        console.log(result);\r\n        setPic(result.posts || []); // Ensure that 'posts' is an array\r\n        setUser(result.user || {}); // Ensure that 'user' is an object\r\n      })\r\n      .catch((err) => console.error(\"Error fetching profile:\", err)); // Add error handling\r\n  }, []); // The dependency array should remain empty\r\n  \r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      {/* Profile frame */}\r\n      <div className=\"profile-frame\">\r\n        {/* profile-pic */}\r\n        <div className=\"profile-pic\">\r\n          <img\r\n            onClick={changeprofile}\r\n            src={user.Photo ? user.Photo : picLink}\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n        {/* profile-data */}\r\n        <div className=\"pofile-data\">\r\n          <h1>{JSON.parse(localStorage.getItem(\"user\")).name}</h1>\r\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\r\n            <p>{pic ? pic.length : \"0\"} posts</p>\r\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\r\n            <p>{user.following ? user.following.length : \"0\"} following</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr\r\n        style={{\r\n          width: \"90%\",\r\n\r\n          opacity: \"0.8\",\r\n          margin: \"25px auto\",\r\n        }}\r\n      />\r\n      {/* Gallery */}\r\n      <div className=\"gallery\">\r\n  {pic.map((pics) => {\r\n    return (\r\n      <img\r\n        key={pics._id}\r\n        src={pics.photo}\r\n        onClick={() => {\r\n          toggleDetails(pics);\r\n        }}\r\n        alt={pics.title || \"User post\"} // Provide meaningful alt text\r\n        className=\"item\"\r\n      />\r\n    );\r\n    })}\r\n    </div>\r\n\r\n      {show &&\r\n        <PostDetail item={posts} toggleDetails={toggleDetails} />\r\n      }\r\n      {\r\n        changePic &&\r\n        <ProfilePic changeprofile={changeprofile} />\r\n      }\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,oBAAoB,CAC3B,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElD,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAG,CAChC,GAAI,CAAAC,OAAO,CAAG,yDAAyD,CACvE,KAAM,CAACC,GAAG,CAAEC,MAAM,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACW,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CACvC,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,IAAI,CAAEC,OAAO,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACiB,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAGjD,KAAM,CAAAmB,aAAa,CAAIN,KAAK,EAAK,CAC/B,GAAIF,IAAI,CAAE,CACRC,OAAO,CAAC,KAAK,CAAC,CAChB,CAAC,IAAM,CACLA,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAACD,KAAK,CAAC,CACjB,CACF,CAAC,CAED,KAAM,CAAAO,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAIH,SAAS,CAAE,CACbC,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,IAAM,CACLA,YAAY,CAAC,IAAI,CAAC,CACpB,CACF,CAAC,CAGDnB,SAAS,CAAC,IAAM,CACdsB,KAAK,CAAC,SAASC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACC,GAAG,EAAE,CAAE,CAC7DC,OAAO,CAAE,CACPC,aAAa,CAAE,SAAS,CAAGJ,YAAY,CAACC,OAAO,CAAC,KAAK,CACvD,CACF,CAAC,CAAC,CACCI,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,MAAM,EAAK,CAChBC,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC,CACnBtB,MAAM,CAACsB,MAAM,CAACnB,KAAK,EAAI,EAAE,CAAC,CAAE;AAC5BG,OAAO,CAACgB,MAAM,CAACjB,IAAI,EAAI,CAAC,CAAC,CAAC,CAAE;AAC9B,CAAC,CAAC,CACDoB,KAAK,CAAEC,GAAG,EAAKH,OAAO,CAACI,KAAK,CAAC,yBAAyB,CAAED,GAAG,CAAC,CAAC,CAAE;AACpE,CAAC,CAAE,EAAE,CAAC,CAAE;AAGR,mBACE9B,KAAA,QAAKgC,SAAS,CAAC,SAAS,CAAAC,QAAA,eAEtBjC,KAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAE5BnC,IAAA,QAAKkC,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BnC,IAAA,QACEoC,OAAO,CAAEpB,aAAc,CACvBqB,GAAG,CAAE1B,IAAI,CAAC2B,KAAK,CAAG3B,IAAI,CAAC2B,KAAK,CAAGlC,OAAQ,CACvCmC,GAAG,CAAC,EAAE,CACP,CAAC,CACC,CAAC,cAENrC,KAAA,QAAKgC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnC,IAAA,OAAAmC,QAAA,CAAKjB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACmB,IAAI,CAAK,CAAC,cACxDtC,KAAA,QAAKgC,SAAS,CAAC,cAAc,CAACO,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAP,QAAA,eACvDjC,KAAA,MAAAiC,QAAA,EAAI9B,GAAG,CAAGA,GAAG,CAACsC,MAAM,CAAG,GAAG,CAAC,QAAM,EAAG,CAAC,cACrCzC,KAAA,MAAAiC,QAAA,EAAIxB,IAAI,CAACiC,SAAS,CAAGjC,IAAI,CAACiC,SAAS,CAACD,MAAM,CAAG,GAAG,CAAC,YAAU,EAAG,CAAC,cAC/DzC,KAAA,MAAAiC,QAAA,EAAIxB,IAAI,CAACkC,SAAS,CAAGlC,IAAI,CAACkC,SAAS,CAACF,MAAM,CAAG,GAAG,CAAC,YAAU,EAAG,CAAC,EAC5D,CAAC,EACH,CAAC,EACH,CAAC,cACN3C,IAAA,OACEyC,KAAK,CAAE,CACLK,KAAK,CAAE,KAAK,CAEZC,OAAO,CAAE,KAAK,CACdC,MAAM,CAAE,WACV,CAAE,CACH,CAAC,cAEFhD,IAAA,QAAKkC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAC3B9B,GAAG,CAAC4C,GAAG,CAAEC,IAAI,EAAK,CACjB,mBACElD,IAAA,QAEEqC,GAAG,CAAEa,IAAI,CAACC,KAAM,CAChBf,OAAO,CAAEA,CAAA,GAAM,CACbrB,aAAa,CAACmC,IAAI,CAAC,CACrB,CAAE,CACFX,GAAG,CAAEW,IAAI,CAACE,KAAK,EAAI,WAAa;AAAA,CAChClB,SAAS,CAAC,MAAM,EANXgB,IAAI,CAAC5B,GAOX,CAAC,CAEJ,CAAC,CAAC,CACG,CAAC,CAEHf,IAAI,eACHP,IAAA,CAACH,UAAU,EAACwD,IAAI,CAAE5C,KAAM,CAACM,aAAa,CAAEA,aAAc,CAAE,CAAC,CAGzDF,SAAS,eACTb,IAAA,CAACF,UAAU,EAACkB,aAAa,CAAEA,aAAc,CAAE,CAAC,EAE3C,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}